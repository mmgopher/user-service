FROM golang:1.14
# Build arguments
ARG GOPROXY
ARG GO111MODULE
ARG GO_IMPORT_PATH
ARG PATH_GO_SOURCES=/go/src/$GO_IMPORT_PATH

# Env variables
ENV GOPROXY=$GOPROXY
ENV GO111MODULE=$GO111MODULE

# Copy 
WORKDIR $PATH_GO_SOURCES
COPY . $PATH_GO_SOURCES

RUN make go_get
RUN make build
EXPOSE 8080
ENTRYPOINT ["./bin/user-service"]